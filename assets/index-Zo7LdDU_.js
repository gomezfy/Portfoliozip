(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))t(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&t(s)}).observe(document,{childList:!0,subtree:!0});function o(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function t(r){if(r.ep)return;r.ep=!0;const i=o(r);fetch(r.href,i)}})();document.addEventListener("DOMContentLoaded",()=>{f(),g(),v(),p(),h(),w(),L()});function f(){const e=document.querySelector(".nav-toggle"),n=document.querySelector(".nav-links"),o=document.querySelectorAll(".nav-links a");!e||!n||(e.addEventListener("click",()=>{const t=n.classList.toggle("active");e.setAttribute("aria-expanded",String(t)),e.classList.toggle("active",t)}),o.forEach(t=>{t.addEventListener("click",()=>{n.classList.remove("active"),e.classList.remove("active"),e.setAttribute("aria-expanded","false")})}),document.addEventListener("click",t=>{n.classList.contains("active")&&!n.contains(t.target)&&!e.contains(t.target)&&(n.classList.remove("active"),e.classList.remove("active"),e.setAttribute("aria-expanded","false"))}))}function g(){document.querySelectorAll('a[href^="#"]').forEach(n=>{n.addEventListener("click",o=>{const t=n.getAttribute("href");if(!t||t==="#")return;o.preventDefault();const r=document.querySelector(t);if(r){const i=document.querySelector(".navbar")?.clientHeight||0,s=r.getBoundingClientRect().top+window.pageYOffset-i-20;window.scrollTo({top:s,behavior:"smooth"})}})})}function v(){const e=new IntersectionObserver(o=>{o.forEach((t,r)=>{t.isIntersecting&&(setTimeout(()=>{t.target.classList.add("visible")},r*100),e.unobserve(t.target))})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});document.querySelectorAll("[data-animate]").forEach(o=>e.observe(o))}function p(){const e=document.getElementById("scrollToTop");e&&(window.addEventListener("scroll",()=>{window.pageYOffset>400?e.classList.add("visible"):e.classList.remove("visible")},{passive:!0}),e.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})}))}function h(){const e=document.querySelector(".navbar");e&&window.addEventListener("scroll",()=>{window.pageYOffset>50?e.classList.add("scrolled"):e.classList.remove("scrolled")},{passive:!0})}function d(e){const n=document.createElement("div");return n.textContent=e,n.innerHTML.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")}function b(e){return/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)&&e.length<=254}const m={attempts:0,resetTime:0,canSubmit(){const e=Date.now();return e>this.resetTime&&(this.attempts=0,this.resetTime=e+6e4),this.attempts<3},recordAttempt(){this.attempts++},getRemainingTime(){return Math.ceil((this.resetTime-Date.now())/1e3)}};function w(){const e=document.getElementById("contactForm");e&&e.addEventListener("submit",async n=>{if(n.preventDefault(),!m.canSubmit()){const l=m.getRemainingTime();c(`⏱️ Muitas tentativas. Aguarde ${l}s para tentar novamente.`,"error");return}const o=e.querySelector(".btn-primary"),t=o.textContent||"Enviar Mensagem →",r=document.getElementById("name").value.trim(),i=document.getElementById("email").value.trim(),s=document.getElementById("message").value.trim(),a={name:d(r),email:d(i),message:d(s)};if(!a.name||a.name.length<2){c("❌ Nome deve ter pelo menos 2 caracteres.","error");return}if(!b(i)){c("❌ Por favor, insira um email válido.","error");return}if(!a.message||a.message.length<10){c("❌ Mensagem deve ter pelo menos 10 caracteres.","error");return}if(a.message.length>1e3){c("❌ Mensagem muito longa. Máximo 1000 caracteres.","error");return}m.recordAttempt(),o.disabled=!0,o.textContent="Enviando...",o.classList.add("loading");try{await new Promise(l=>setTimeout(l,1500)),console.log("Contact form data (sanitized):",a),c("✓ Mensagem enviada com sucesso! Responderei em breve.","success"),e.reset()}catch{c("✗ Erro ao enviar mensagem. Por favor, tente novamente.","error")}finally{o.textContent=t,o.disabled=!1,o.classList.remove("loading")}})}function c(e,n){const o=document.querySelector(".notification");o&&o.remove();const t=document.createElement("div");t.className=`notification notification-${n}`,t.textContent=e,document.body.appendChild(t),requestAnimationFrame(()=>{t.classList.add("show")}),setTimeout(()=>{t.classList.remove("show"),setTimeout(()=>{t.remove()},400)},4e3)}function L(){const e=document.querySelectorAll(".stat-number[data-count]"),n=new IntersectionObserver(o=>{o.forEach(t=>{if(t.isIntersecting){const r=t.target,i=parseInt(r.dataset.count||"0");E(r,i),n.unobserve(r)}})},{threshold:.5});e.forEach(o=>n.observe(o))}function E(e,n){const t=performance.now();function r(i){const s=i-t,a=Math.min(s/2e3,1),l=1-Math.pow(1-a,3),u=Math.floor(l*n);e.textContent=u.toString(),a<1?requestAnimationFrame(r):e.textContent=n.toString()}requestAnimationFrame(r)}"requestIdleCallback"in window&&requestIdleCallback(()=>{console.log("Portfolio loaded successfully")});"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").catch(()=>{})});
